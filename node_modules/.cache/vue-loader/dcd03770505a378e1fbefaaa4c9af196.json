{"remainingRequest":"/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/memory-lights-source/src/components/GameLights/Button.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/memory-lights-source/src/components/GameLights/Button.vue","mtime":1584936348592},{"path":"/var/www/html/memory-lights-source/node_modules/babel-loader/lib/index.js","mtime":1584936347784},{"path":"/var/www/html/memory-lights-source/node_modules/cache-loader/dist/cjs.js","mtime":1584936347864},{"path":"/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js","mtime":1584936348512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlnaHRzQnV0dG9uJywKICBwcm9wczogeyAgIAogICAgc2hvcnRrZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBzb3VuZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwgCiAgbWV0aG9kczogewogICAgY2xpY2sgKCRldmVudCkgewogICAgICBjb25zdCB0dXJuID0gdGhpcy4kc3RvcmUuc3RhdGUuc3RhdGU7CiAgICAgIGlmICh0dXJuICE9ICdsaXN0ZW5pbmcnICYmICghJGV2ZW50IHx8ICRldmVudC5pc1RydXN0ZWQpKSB7CiAgICAgICAgLy8gaWYgdXNlciB0cmlnZ2VyZWQgYW4gYWN0aW9uIHdoZW4gaXMgbm90IGl0cyB0dXJuCiAgICAgICAgLy8gdGhlIGFjdGlvbiB3aWxsIGJlIGlnbm9yZWQuIAogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCAkYnRuID0gdGhpcy4kcmVmcy5idG47CiAgICAgIGNvbnN0IGtleSA9ICRidG4/LmRhdGFzZXQ/LmxpZ2h0QnV0dG9uLnRvTG93ZXJDYXNlKCk7CiAgICAgICRidG4uY2xhc3NMaXN0LmFkZCgnY2xpY2snKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7ICRidG4uY2xhc3NMaXN0LnJlbW92ZSgnY2xpY2snKTsgfSwgMjAwKTsKICAgICAgdGhpcy5wbGF5U291bmQocmVxdWlyZShgQC9hc3NldHMvc291bmRzLyR7dGhpcy5zb3VuZH1gKSk7CiAgICAgIHRoaXMuY2hlY2tTZXF1ZW5jZShrZXkpOwogICAgfSwKICAgIGNoZWNrU2VxdWVuY2UgKGtleSkgewogICAgICBpZiAod2luZG93LiRnYW1lbGlnaHRzLmdldFN0YXRlKCkgPT09ICdsaXN0ZW5pbmcnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaGl0cy5wdXNoKGtleSk7CiAgICAgICAgY29uc3Qga2V5bWFwID0geyJlIjogMCwgImkiOiAxLCAiZiI6IDIsICJqIjogM307CiAgICAgICAgY29uc3Qga2V5aW5kZXggPSBrZXltYXBba2V5LnRvTG93ZXJDYXNlKCldOwogICAgICAgIGNvbnN0IGV4cGVjdGVkID0gd2luZG93LiRnYW1lbGlnaHRzLnNoaWZ0U2VxdWVuY2UoKTsKICAgICAgICBpZiAoZXhwZWN0ZWQgPT0ga2V5aW5kZXgpIHsKICAgICAgICAgIGlmICghd2luZG93LiRnYW1lbGlnaHRzLnNlcXVlbmNlKCkubGVuZ3RoKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5zdGF0ZSA9PSAiZ2FtZW92ZXIiKSByZXR1cm47CiAgICAgICAgICAgICAgd2luZG93LiRnYW1lbGlnaHRzLnNldFN0YXRlKCd3YWl0aW5nJyk7CiAgICAgICAgICAgICAgd2luZG93LiRnYW1lbGlnaHRzLmxldmVsVXAoKTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdpbmRvdy4kZ2FtZWxpZ2h0cy5nYW1lT3ZlcigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHBsYXlTb3VuZCAoc291bmQpIHsKICAgICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oc291bmQpOwogICAgICBhdWRpby5wbGF5KCk7CiAgICB9ICAgIAogIH0sCiAgbW91bnRlZCAoKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGUgPT4gewogICAgICBjb25zdCBzaG9ydGtleSA9IHRoaXMuc2hvcnRrZXkudG9Mb3dlckNhc2UoKTsKICAgICAgaWYgKGUua2V5LnRvTG93ZXJDYXNlKCkgPT0gc2hvcnRrZXkgfHwgZS5jb2RlLnRvTG93ZXJDYXNlKCkgPT0gYGtleSR7c2hvcnRrZXl9YCkgewogICAgICAgIHRoaXMuY2xpY2soKTsKICAgICAgfQogICAgfSk7CiAgfQp9Cg=="},{"version":3,"sources":["Button.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Button.vue","sourceRoot":"src/components/GameLights","sourcesContent":["<template>\n  <div class=\"game-lights-button\">\n    <button ref=\"btn\" :style=\"`background-color:${color}`\" @click='click($event)' :data-light-button=\"shortkey\">\n        {{shortkey}}\n    </button>  \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LightsButton',\n  props: {   \n    shortkey: {\n      type: String,\n      required: true\n    },\n    color: {\n      type: String,\n      required: true\n    },\n    sound: {\n      type: String,\n      required: true\n    }\n  }, \n  methods: {\n    click ($event) {\n      const turn = this.$store.state.state;\n      if (turn != 'listening' && (!$event || $event.isTrusted)) {\n        // if user triggered an action when is not its turn\n        // the action will be ignored. \n        return;\n      }\n      const $btn = this.$refs.btn;\n      const key = $btn?.dataset?.lightButton.toLowerCase();\n      $btn.classList.add('click');\n      setTimeout(() => { $btn.classList.remove('click'); }, 200);\n      this.playSound(require(`@/assets/sounds/${this.sound}`));\n      this.checkSequence(key);\n    },\n    checkSequence (key) {\n      if (window.$gamelights.getState() === 'listening') {\n        this.$store.state.hits.push(key);\n        const keymap = {\"e\": 0, \"i\": 1, \"f\": 2, \"j\": 3};\n        const keyindex = keymap[key.toLowerCase()];\n        const expected = window.$gamelights.shiftSequence();\n        if (expected == keyindex) {\n          if (!window.$gamelights.sequence().length) {\n            setTimeout(() => {\n              if (this.$store.state.state == \"gameover\") return;\n              window.$gamelights.setState('waiting');\n              window.$gamelights.levelUp();\n            }, 1000);\n          }\n        } else {\n          window.$gamelights.gameOver();\n        }\n      }\n    },\n    playSound (sound) {\n      const audio = new Audio(sound);\n      audio.play();\n    }    \n  },\n  mounted () {\n    document.addEventListener('keypress', e => {\n      const shortkey = this.shortkey.toLowerCase();\n      if (e.key.toLowerCase() == shortkey || e.code.toLowerCase() == `key${shortkey}`) {\n        this.click();\n      }\n    });\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .game-lights-button {\n    outline: none;\n    user-selection: none;\n    animation: effect_dylan 800ms;\n    -webkit-tap-highlight-color: transparent;    \n    button {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n      margin: 0 auto;\n      width: 56px;\n      height: 56px;\n      border-radius: 100%;\n      outline: none;\n      overflow: visible;\n      transition: all 100ms ease-in;\n      color: #ffffff;\n      font-weight: 700;\n      opacity: .5;\n      cursor: pointer;\n      border: dotted 1px transparent;\n      box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\n      span {\n        font-size: 18px;\n        opacity: .8;\n      }\n      &:before {\n        content: '';\n        background-color: currentColor;\n        border-radius: 50%;\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        transform: scale(0.001, 0.001);\n      }\n      &.click {\n        opacity: 1;\n        pointer-events: none;\n        user-select: none;\n        &:before {\n          outline: none;\n          user-selection: none;\n          pointer-events: none;        \n          animation: effect_dylan 800ms;\n        }\n      }      \n    }\n    @keyframes effect_dylan {\n      50% {\n        will-change: scale;\n        transform: scale(3, 3);\n        opacity: 0;\n      }\n      99% {\n        will-change: scale;\n        transform: scale(0.001, 0.001);\n        opacity: 0;\n      }\n      100% {\n        will-change: scale;\n        transform: scale(0.001, 0.001);\n        opacity: 1;\n      }\n    }  \n  } \n</style>\n"]}]}