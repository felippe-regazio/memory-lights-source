{"remainingRequest":"/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/memory-lights-source/src/components/GameLights.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/memory-lights-source/src/components/GameLights.vue","mtime":1584936348592},{"path":"/var/www/html/memory-lights-source/node_modules/babel-loader/lib/index.js","mtime":1584936347784},{"path":"/var/www/html/memory-lights-source/node_modules/cache-loader/dist/cjs.js","mtime":1584936347864},{"path":"/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js","mtime":1584936348512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgR2FtZU92ZXIgZnJvbSAnQC9jb21wb25lbnRzL0dhbWVMaWdodHMvR2FtZU92ZXIudnVlJwppbXBvcnQgR2xIb2xkZXIgZnJvbSAnQC9jb21wb25lbnRzL0dhbWVMaWdodHMvSG9sZGVyLnZ1ZScKaW1wb3J0IEdsQnV0dG9uIGZyb20gJ0AvY29tcG9uZW50cy9HYW1lTGlnaHRzL0J1dHRvbi52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0dhbWVMaWdodHMnLAogIGNvbXBvbmVudHM6IHsKICAgIEdsSG9sZGVyLAogICAgR2xCdXR0b24sCiAgICBHYW1lT3ZlcgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxldmVsOiB7CiAgICAgIGdldCAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxldmVsCiAgICAgIH0sCiAgICAgIHNldCAodmFsdWUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sZXZlbCA9IHZhbHVlCiAgICAgIH0KICAgIH0sICAgIAogICAgY3VycmVudFNlcXVlbmNlOiB7CiAgICAgIGdldCAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRTZXF1ZW5jZQogICAgICB9LAogICAgICBzZXQgKHZhbHVlKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFNlcXVlbmNlID0gdmFsdWUKICAgICAgfQogICAgfSwKICAgIHN0YXRlOiB7CiAgICAgIGdldCAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnN0YXRlCiAgICAgIH0sCiAgICAgIHNldCAodmFsdWUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zdGF0ZSA9IHZhbHVlCiAgICAgIH0KICAgIH0gICAgCiAgfSwKICBtZXRob2RzOiB7CiAgICBwbGF5IChzZXF1ZW5jZSA9IFtdKSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoJ3dhaXRpbmcnKTsKICAgICAgc2VxdWVuY2UuZm9yRWFjaCgobiwgaSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtbGlnaHQtYnV0dG9uXWApW25dLmNsaWNrKCk7CiAgICAgICAgICBpZiAoaSA9PSBzZXF1ZW5jZS5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoJ2xpc3RlbmluZycpOwogICAgICAgICAgfSAKICAgICAgICB9LCA4MDAgKiBpKTsKICAgICAgfSk7CiAgICB9LAogICAgbGV2ZWxVcCAoKSB7CiAgICAgIHRoaXMubGV2ZWwrKzsKICAgICAgdGhpcy5jdXJyZW50U2VxdWVuY2UgPSBbXTsKICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMubGV2ZWw7IGkrKykgewogICAgICAgIHRoaXMuY3VycmVudFNlcXVlbmNlLnB1c2godGhpcy5yYW5kb21OdW1iZXIoMCwzKSk7CiAgICAgIH0KICAgICAgdGhpcy5wbGF5KHRoaXMuY3VycmVudFNlcXVlbmNlKTsKICAgIH0sCiAgICByZXN0YXJ0ICgpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSgnd2FpdGluZycpOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zdGFydGVkID0gdHJ1ZTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaGl0cyA9IFtdOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sZXZlbCA9IDA7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVsYXBzZWRUaW1lID0gMDsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFNlcXVlbmNlID0gW107CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNlcXVlbmNlTGlzdGVuZXIgPSB1bmRlZmluZWQ7ICAKICAgICAgd2luZG93Py4kZ2FtZWxpZ2h0c190aW1lcj8ucmVzZXQoKTsgICAgIAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHdpbmRvdy4kZ2FtZWxpZ2h0cy5sZXZlbFVwKCk7CiAgICAgIH0sIDUwMCk7ICAgICAgCiAgICB9LCAgICAKICAgIGdhbWVPdmVyICgpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSgnZ2FtZW92ZXInKTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc3RhcnRlZCA9IGZhbHNlOwogICAgfSwKICAgIHJhbmRvbU51bWJlciAobWluLCBtYXgpIHsKICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47CiAgICB9LAogICAgc2V0U3RhdGUgKHN0YXRlKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnN0YXRlID0gc3RhdGU7CiAgICB9LAogICAgZ2V0U3RhdGUgKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc3RhdGU7CiAgICB9LAogICAgc2VxdWVuY2UgKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2VxdWVuY2U7CiAgICB9LAogICAgc2hpZnRTZXF1ZW5jZSAoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXF1ZW5jZS5zaGlmdCgpOwogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB3aW5kb3cuJGdhbWVsaWdodHMgPSB0aGlzOwogIH0KfQo="},{"version":3,"sources":["GameLights.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GameLights.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div :class=\"`game-lights ${state}`\">\n      <gl-holder>\n        <gl-button :shortkey=\"'E'\" :color=\"'#FF0000'\" :sound=\"'1.mp3'\"/>\n        <gl-button :shortkey=\"'I'\" :color=\"'#008000'\" :sound=\"'2.mp3'\"/>\n        <gl-button :shortkey=\"'F'\" :color=\"'#0000FF'\" :sound=\"'3.mp3'\"/>\n        <gl-button :shortkey=\"'J'\" :color=\"'#008B8B'\" :sound=\"'4.mp3'\"/>\n      </gl-holder>\n      <game-over v-if=\"state == 'gameover'\"/>\n  </div>\n</template>\n\n<script>\n\nimport GameOver from '@/components/GameLights/GameOver.vue'\nimport GlHolder from '@/components/GameLights/Holder.vue'\nimport GlButton from '@/components/GameLights/Button.vue'\n\nexport default {\n  name: 'GameLights',\n  components: {\n    GlHolder,\n    GlButton,\n    GameOver\n  },\n  computed: {\n    level: {\n      get () {\n        return this.$store.state.level\n      },\n      set (value) {\n        this.$store.state.level = value\n      }\n    },    \n    currentSequence: {\n      get () {\n        return this.$store.state.currentSequence\n      },\n      set (value) {\n        this.$store.state.currentSequence = value\n      }\n    },\n    state: {\n      get () {\n        return this.$store.state.state\n      },\n      set (value) {\n        this.$store.state.state = value\n      }\n    }    \n  },\n  methods: {\n    play (sequence = []) {\n      this.setState('waiting');\n      sequence.forEach((n, i) => {\n        setTimeout(() => {\n          document.querySelectorAll(`[data-light-button]`)[n].click();\n          if (i == sequence.length - 1) {\n            this.setState('listening');\n          } \n        }, 800 * i);\n      });\n    },\n    levelUp () {\n      this.level++;\n      this.currentSequence = [];\n      for (let i=0; i<this.level; i++) {\n        this.currentSequence.push(this.randomNumber(0,3));\n      }\n      this.play(this.currentSequence);\n    },\n    restart () {\n      this.setState('waiting');\n      this.$store.state.started = true;\n      this.$store.state.hits = [];\n      this.$store.state.level = 0;\n      this.$store.state.elapsedTime = 0;\n      this.$store.state.currentSequence = [];\n      this.$store.state.sequenceListener = undefined;  \n      window?.$gamelights_timer?.reset();     \n      setTimeout(() => {\n          window.$gamelights.levelUp();\n      }, 500);      \n    },    \n    gameOver () {\n      this.setState('gameover');\n      this.$store.state.started = false;\n    },\n    randomNumber (min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n    setState (state) {\n      this.$store.state.state = state;\n    },\n    getState () {\n      return this.$store.state.state;\n    },\n    sequence () {\n      return this.currentSequence;\n    },\n    shiftSequence () {\n      return this.currentSequence.shift();\n    }\n  },\n  mounted () {\n    window.$gamelights = this;\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .game-lights {\n    position: relative;\n    margin-bottom: 40px;\n    &.waiting {\n      pointer-events: none;\n    }\n  }\n</style>\n"]}]}