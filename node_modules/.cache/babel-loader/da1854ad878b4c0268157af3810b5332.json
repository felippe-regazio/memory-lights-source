{"remainingRequest":"/var/www/html/memory-lights-source/node_modules/thread-loader/dist/cjs.js!/var/www/html/memory-lights-source/node_modules/babel-loader/lib/index.js!/var/www/html/memory-lights-source/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/memory-lights-source/src/components/GameLights/Button.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/memory-lights-source/src/components/GameLights/Button.vue","mtime":1584935874768},{"path":"/var/www/html/memory-lights-source/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/memory-lights-source/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/memory-lights-source/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/memory-lights-source/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/memory-lights-source/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMaWdodHNCdXR0b24nLAogIHByb3BzOiB7CiAgICBzaG9ydGtleTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY29sb3I6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNvdW5kOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgdmFyIF8kYnRuJGRhdGFzZXQ7CgogICAgICB2YXIgdHVybiA9IHRoaXMuJHN0b3JlLnN0YXRlLnN0YXRlOwoKICAgICAgaWYgKHR1cm4gIT0gJ2xpc3RlbmluZycgJiYgKCEkZXZlbnQgfHwgJGV2ZW50LmlzVHJ1c3RlZCkpIHsKICAgICAgICAvLyBpZiB1c2VyIHRyaWdnZXJlZCBhbiBhY3Rpb24gd2hlbiBpcyBub3QgaXRzIHR1cm4KICAgICAgICAvLyB0aGUgYWN0aW9uIHdpbGwgYmUgaWdub3JlZC4gCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgJGJ0biA9IHRoaXMuJHJlZnMuYnRuOwogICAgICB2YXIga2V5ID0gJGJ0biA9PT0gbnVsbCB8fCAkYnRuID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoXyRidG4kZGF0YXNldCA9ICRidG4uZGF0YXNldCkgPT09IG51bGwgfHwgXyRidG4kZGF0YXNldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXyRidG4kZGF0YXNldC5saWdodEJ1dHRvbi50b0xvd2VyQ2FzZSgpOwogICAgICAkYnRuLmNsYXNzTGlzdC5hZGQoJ2NsaWNrJyk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICRidG4uY2xhc3NMaXN0LnJlbW92ZSgnY2xpY2snKTsKICAgICAgfSwgMjAwKTsKICAgICAgdGhpcy5wbGF5U291bmQocmVxdWlyZSgiQC9hc3NldHMvc291bmRzLyIuY29uY2F0KHRoaXMuc291bmQpKSk7CiAgICAgIHRoaXMuY2hlY2tTZXF1ZW5jZShrZXkpOwogICAgfSwKICAgIGNoZWNrU2VxdWVuY2U6IGZ1bmN0aW9uIGNoZWNrU2VxdWVuY2Uoa2V5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAod2luZG93LiRnYW1lbGlnaHRzLmdldFN0YXRlKCkgPT09ICdsaXN0ZW5pbmcnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaGl0cy5wdXNoKGtleSk7CiAgICAgICAgdmFyIGtleW1hcCA9IHsKICAgICAgICAgICJlIjogMCwKICAgICAgICAgICJpIjogMSwKICAgICAgICAgICJmIjogMiwKICAgICAgICAgICJqIjogMwogICAgICAgIH07CiAgICAgICAgdmFyIGtleWluZGV4ID0ga2V5bWFwW2tleS50b0xvd2VyQ2FzZSgpXTsKICAgICAgICB2YXIgZXhwZWN0ZWQgPSB3aW5kb3cuJGdhbWVsaWdodHMuc2hpZnRTZXF1ZW5jZSgpOwoKICAgICAgICBpZiAoZXhwZWN0ZWQgPT0ga2V5aW5kZXgpIHsKICAgICAgICAgIGlmICghd2luZG93LiRnYW1lbGlnaHRzLnNlcXVlbmNlKCkubGVuZ3RoKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpcy4kc3RvcmUuc3RhdGUuc3RhdGUgPT0gImdhbWVvdmVyIikgcmV0dXJuOwogICAgICAgICAgICAgIHdpbmRvdy4kZ2FtZWxpZ2h0cy5zZXRTdGF0ZSgnd2FpdGluZycpOwogICAgICAgICAgICAgIHdpbmRvdy4kZ2FtZWxpZ2h0cy5sZXZlbFVwKCk7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aW5kb3cuJGdhbWVsaWdodHMuZ2FtZU92ZXIoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBwbGF5U291bmQ6IGZ1bmN0aW9uIHBsYXlTb3VuZChzb3VuZCkgewogICAgICB2YXIgYXVkaW8gPSBuZXcgQXVkaW8oc291bmQpOwogICAgICBhdWRpby5wbGF5KCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgc2hvcnRrZXkgPSBfdGhpczIuc2hvcnRrZXkudG9Mb3dlckNhc2UoKTsKCiAgICAgIGlmIChlLmtleS50b0xvd2VyQ2FzZSgpID09IHNob3J0a2V5IHx8IGUuY29kZS50b0xvd2VyQ2FzZSgpID09ICJrZXkiLmNvbmNhdChzaG9ydGtleSkpIHsKICAgICAgICBfdGhpczIuY2xpY2soKTsKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["Button.vue"],"names":[],"mappings":";;;;;;;;AASA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AATA,GAFA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,iBACA,MADA,EACA;AAAA;;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;;AACA,UAAA,IAAA,IAAA,WAAA,KAAA,CAAA,MAAA,IAAA,MAAA,CAAA,SAAA,CAAA,EAAA;AACA;AACA;AACA;AACA;;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,GAAA;AACA,UAAA,GAAA,GAAA,IAAA,aAAA,IAAA,wCAAA,IAAA,CAAA,OAAA,kDAAA,cAAA,WAAA,CAAA,WAAA,EAAA;AACA,MAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,OAAA;AACA,MAAA,UAAA,CAAA,YAAA;AAAA,QAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,OAAA;AAAA,OAAA,EAAA,GAAA,CAAA;AACA,WAAA,SAAA,CAAA,OAAA,2BAAA,KAAA,KAAA,EAAA;AACA,WAAA,aAAA,CAAA,GAAA;AACA,KAdA;AAeA,IAAA,aAfA,yBAeA,GAfA,EAeA;AAAA;;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,QAAA,OAAA,WAAA,EAAA;AACA,aAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA,YAAA,MAAA,GAAA;AAAA,eAAA,CAAA;AAAA,eAAA,CAAA;AAAA,eAAA,CAAA;AAAA,eAAA;AAAA,SAAA;AACA,YAAA,QAAA,GAAA,MAAA,CAAA,GAAA,CAAA,WAAA,EAAA,CAAA;AACA,YAAA,QAAA,GAAA,MAAA,CAAA,WAAA,CAAA,aAAA,EAAA;;AACA,YAAA,QAAA,IAAA,QAAA,EAAA;AACA,cAAA,CAAA,MAAA,CAAA,WAAA,CAAA,QAAA,GAAA,MAAA,EAAA;AACA,YAAA,UAAA,CAAA,YAAA;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA,IAAA,UAAA,EAAA;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,QAAA,CAAA,SAAA;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,OAAA;AACA,aAJA,EAIA,IAJA,CAAA;AAKA;AACA,SARA,MAQA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,QAAA;AACA;AACA;AACA,KAjCA;AAkCA,IAAA,SAlCA,qBAkCA,KAlCA,EAkCA;AACA,UAAA,KAAA,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA;AACA,MAAA,KAAA,CAAA,IAAA;AACA;AArCA,GAhBA;AAuDA,EAAA,OAvDA,qBAuDA;AAAA;;AACA,IAAA,QAAA,CAAA,gBAAA,CAAA,UAAA,EAAA,UAAA,CAAA,EAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,QAAA,CAAA,WAAA,EAAA;;AACA,UAAA,CAAA,CAAA,GAAA,CAAA,WAAA,MAAA,QAAA,IAAA,CAAA,CAAA,IAAA,CAAA,WAAA,mBAAA,QAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA;AACA;AACA,KALA;AAMA;AA9DA,CAAA","sourcesContent":["<template>\n  <div class=\"game-lights-button\">\n    <button ref=\"btn\" :style=\"`background-color:${color}`\" @click='click($event)' :data-light-button=\"shortkey\">\n        {{shortkey}}\n    </button>  \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LightsButton',\n  props: {   \n    shortkey: {\n      type: String,\n      required: true\n    },\n    color: {\n      type: String,\n      required: true\n    },\n    sound: {\n      type: String,\n      required: true\n    }\n  }, \n  methods: {\n    click ($event) {\n      const turn = this.$store.state.state;\n      if (turn != 'listening' && (!$event || $event.isTrusted)) {\n        // if user triggered an action when is not its turn\n        // the action will be ignored. \n        return;\n      }\n      const $btn = this.$refs.btn;\n      const key = $btn?.dataset?.lightButton.toLowerCase();\n      $btn.classList.add('click');\n      setTimeout(() => { $btn.classList.remove('click'); }, 200);\n      this.playSound(require(`@/assets/sounds/${this.sound}`));\n      this.checkSequence(key);\n    },\n    checkSequence (key) {\n      if (window.$gamelights.getState() === 'listening') {\n        this.$store.state.hits.push(key);\n        const keymap = {\"e\": 0, \"i\": 1, \"f\": 2, \"j\": 3};\n        const keyindex = keymap[key.toLowerCase()];\n        const expected = window.$gamelights.shiftSequence();\n        if (expected == keyindex) {\n          if (!window.$gamelights.sequence().length) {\n            setTimeout(() => {\n              if (this.$store.state.state == \"gameover\") return;\n              window.$gamelights.setState('waiting');\n              window.$gamelights.levelUp();\n            }, 1000);\n          }\n        } else {\n          window.$gamelights.gameOver();\n        }\n      }\n    },\n    playSound (sound) {\n      const audio = new Audio(sound);\n      audio.play();\n    }    \n  },\n  mounted () {\n    document.addEventListener('keypress', e => {\n      const shortkey = this.shortkey.toLowerCase();\n      if (e.key.toLowerCase() == shortkey || e.code.toLowerCase() == `key${shortkey}`) {\n        this.click();\n      }\n    });\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .game-lights-button {\n    outline: none;\n    user-selection: none;\n    animation: effect_dylan 800ms;\n    -webkit-tap-highlight-color: transparent;    \n    button {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n      margin: 0 auto;\n      width: 56px;\n      height: 56px;\n      border-radius: 100%;\n      outline: none;\n      overflow: visible;\n      transition: all 100ms ease-in;\n      color: #ffffff;\n      font-weight: 700;\n      opacity: .5;\n      cursor: pointer;\n      border: dotted 1px transparent;\n      box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\n      span {\n        font-size: 18px;\n        opacity: .8;\n      }\n      &:before {\n        content: '';\n        background-color: currentColor;\n        border-radius: 50%;\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        transform: scale(0.001, 0.001);\n      }\n      &.click {\n        opacity: 1;\n        pointer-events: none;\n        user-select: none;\n        &:before {\n          outline: none;\n          user-selection: none;\n          pointer-events: none;        \n          animation: effect_dylan 800ms;\n        }\n      }      \n    }\n    @keyframes effect_dylan {\n      50% {\n        will-change: scale;\n        transform: scale(3, 3);\n        opacity: 0;\n      }\n      99% {\n        will-change: scale;\n        transform: scale(0.001, 0.001);\n        opacity: 0;\n      }\n      100% {\n        will-change: scale;\n        transform: scale(0.001, 0.001);\n        opacity: 1;\n      }\n    }  \n  } \n</style>\n"],"sourceRoot":"src/components/GameLights"}]}